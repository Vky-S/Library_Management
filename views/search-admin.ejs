<%- include("partials/header") %>

<div class="outer-div">
</div>
  <div class="sidepane">
    <div class="logo flex-item">
      <img class="logo-img" src="/images/books_icon.png" alt="Books_Logo"><p class="logo-heading">LMS</p>
    </div>
    <div class="flex-item">
    <a href="/admin/home" class="home selected"><i class="fas fa-home fa-sm icon"></i>Home</a>
    </div>
    <hr>
    <div class="flex-item">
      <a href="javascript:void(0)" onclick="showSubMenu(event)" data-value="books" class="books"><i data-value="books" class="fas fa-book fa-sm icon"></i>Books<i data-value="books" class="fas fa-sort-down fa-sm down-icon"></i></a>
      <ul class="active">
        <li><a href="/admin/add_book">Add Book</a></li>
        <li><a href="/admin/issued_books">Issued Books</a></li>
        <li><a href="/admin/all_books">All Books</a></li>
      </ul>
    </div>
    <hr>
    <div class="flex-item">
      <a href="javascript:void(0)" onclick="showSubMenu(event)" data-value="request-book" class="request-book"><i data-value="request-book" class="fa fa-hand-o-up fa-sm icon" aria-hidden="true"></i>Requests<i data-value="request-book" class="fas fa-sort-down fa-sm down-icon"></i></a>
      <ul class="active">
        <li><a href="/admin/all_book_requests">All Book Requests</a></li>
      </ul>
    </div>
  <hr>
  <div class="flex-item">
    <a href="javascript:void(0)" onclick="showSubMenu(event)" data-value="users" class="users"><i data-value="users" class="fas fa-users fa-sm icon"></i>Users<i data-value="users" class="fas fa-sort-down fa-sm down-icon"></i></a>
    <ul class="active">
      <li><a href="/admin/all_users">All Users</a></li>
      <li><a href="/admin/add_user">Add a user</a></li>
    </ul>
  </div>
  <hr>
  <div class="flex-item">
    <a href="/admin/user_profile" class="user-info"><i class="fas fa-user-circle fa-sm icon"></i>My Info</a>
  </div>
  <hr>
  </div>
  <div class="copyright">
    &copy; 2020
  </div>
    <hr class="hr-rule">
    <div class="log-out" onclick="location.href = '/logout'">
      <a class="log-out-text" href="/logout"><i class="fas fa-sign-out-alt icon-lg"></i>Logout</a>
    </div>

<div class="books-table search-admin">
  <table>
    <tr>
      <th>Book Cover</th>
      <th>Book Name</th>
      <th>Author Name</th>
      <th>Price</th>
      <th>Issued Date</th>
      <th>return Date</th>
      <th>Issued To</th>
    </tr>
<% if(searchedBooks){ %>
  <% let bookAdded = false; %>
  <% searchedBooks.forEach( (book) => { %>
    <% if(book.book_name.toLowerCase().includes(bookName.toLowerCase())){ %>
      <% const issuedDate = book.issued_date.getDate() + "/" + (book.issued_date.getMonth() + 1) + "/" + book.issued_date.getFullYear() %>
      <% const returnDate = book.return_date.getDate() + "/" + (book.return_date.getMonth() + 1) + "/" + book.return_date.getFullYear() %>
      <tr>
        <td><img class="book-img-list" src="<%= book.book_cover %>" alt="coding-book"></td>
        <td><p class="book-name-list"><%= book.book_name %></p></td>
        <td><p class="author-name-list"><%= book.author_name %></p></td>
        <td><p><%= book.price %></p></td>
        <td><p><%= issuedDate %></p></td>
        <td><p><%= returnDate %></p></td>
        <td><p><%= book.user_name %></p></td>
      </tr>
      <% bookAdded = true; %>
    <% } %>
  <% }); %>
  <% if(bookAdded === false){ %>
    <div class="warning-text">
      No Books found!
    </div>
  <% } %>
<% } else { %>
  <div class="warning-text">
    No Books found!
  </div>
<% } %>
</table>
</div>

<div class="outer-div">
</div>
<hr class="hr-rule">
<div class="return-to-books">
<button class="return-to-books-button" onclick="location.href='/admin/issued_books'" type="submit" name="return-to-books"><i class="fas fa-arrow-circle-left left-arrow-icon"></i> Return to Issued Books</button>
</div>


<%- include("partials/footer") %>
